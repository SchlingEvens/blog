# 音频

HTML5 引入了 `<audio>` 标签，使得在网页中嵌入音频内容不再依赖 Flash 等第三方插件，实现了原生支持。

<div style="background-color: #e3f2fd; border-left: 5px solid #2196f3; padding: 15px; margin: 10px 0; color: #0d47a1;">
  <strong>核心注意：自动播放策略 (Autoplay Policy)</strong><br>
  为了避免突然发出声音干扰用户，现代浏览器（尤其是 Chrome 和 Safari）通常<strong>禁止</strong>带有声音的媒体自动播放。
  <br>如果要实现自动播放，通常需要同时设置 <code>muted</code>（静音）属性，或者用户必须先与页面产生交互（如点击）。
</div>

## 音频标签

使用 `<audio>` 标签定义声音内容。

- **标签类型**：双标签，中间的内容是“后备内容”（Fallback Content）。
- **默认表现**：如果不设置 `controls` 属性，`<audio>` 标签默认在页面上是**不可见**的（除非通过 JavaScript 自定义播放器界面）。

## 核心属性详解

- **controls**：向用户显示浏览器默认的播放控件（播放/暂停按钮、进度条、音量控制）。
- **autoplay**：页面加载就绪后立即尝试播放（受浏览器策略限制）。
- **loop**：音频播放结束后自动重新开始（适用于背景音乐）。
- **muted**：默认静音。
- **preload**：预加载策略。
    - `auto`：页面加载时加载音频。
    - `metadata`：仅加载元数据（时长等）。
    - `none`：不预加载（节省流量）。

## 多格式兼容性

由于不同浏览器对音频编码格式的支持度不同，最佳实践是使用 `<source>` 标签提供多个源文件，浏览器会从上到下尝试加载第一个支持的格式。

<div style="width: 100%; overflow-x: auto; margin-bottom: 20px;">
  <table style="width: 100%; border-collapse: collapse; border: 1px solid #ddd; font-family: sans-serif;">
    <thead>
      <tr style="background-color: #f2f2f2;">
        <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">格式</th>
        <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">MIME 类型</th>
        <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">说明</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style="border: 1px solid #ddd; padding: 8px;"><strong>MP3</strong></td>
        <td style="border: 1px solid #ddd; padding: 8px;">audio/mpeg</td>
        <td style="border: 1px solid #ddd; padding: 8px;">兼容性最好，几乎所有浏览器都支持。</td>
      </tr>
      <tr>
        <td style="border: 1px solid #ddd; padding: 8px;"><strong>OGG</strong></td>
        <td style="border: 1px solid #ddd; padding: 8px;">audio/ogg</td>
        <td style="border: 1px solid #ddd; padding: 8px;">开源格式，Firefox 和 Chrome 支持良好。</td>
      </tr>
      <tr>
        <td style="border: 1px solid #ddd; padding: 8px;"><strong>WAV</strong></td>
        <td style="border: 1px solid #ddd; padding: 8px;">audio/wav</td>
        <td style="border: 1px solid #ddd; padding: 8px;">无损音质，体积大，通常不作为网页首选。</td>
      </tr>
    </tbody>
  </table>
</div>

<div style="border: 1px solid #ddd; border-radius: 4px; overflow: hidden; margin: 20px 0;">
  <div style="background-color: #f5f5f5; padding: 10px; border-bottom: 1px solid #ddd; font-family: Consolas, monospace; font-size: 14px; color: #333;">
    &lt;!-- 源码 --&gt;<br>
    &lt;audio controls loop&gt;<br>
    &nbsp;&nbsp;&lt;!-- 优先加载 MP3 --&gt;<br>
    &nbsp;&nbsp;&lt;source src="music.mp3" type="audio/mpeg"&gt;<br>
    &nbsp;&nbsp;&lt;!-- 如果不支持 MP3，尝试加载 OGG --&gt;<br>
    &nbsp;&nbsp;&lt;source src="music.ogg" type="audio/ogg"&gt;<br>
    &nbsp;&nbsp;&lt;!-- 如果都不支持，显示文本 --&gt;<br>
    &nbsp;&nbsp;&lt;p&gt;您的浏览器版本过低，不支持音频播放。&lt;/p&gt;<br>
    &lt;/audio&gt;
  </div>
  <div style="padding: 20px; background-color: #fff;">
    <audio controls loop>
      <source src="#" type="audio/mpeg">
      您的浏览器版本过低，不支持音频播放。
    </audio>
    <div style="margin-top: 10px; font-size: 12px; color: #666;">
      * 注：上图为浏览器默认渲染的音频播放器 UI。
    </div>
  </div>
</div>