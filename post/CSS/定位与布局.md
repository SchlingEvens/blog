# 定位与布局

控制元素在页面中的位置和排列方式，是构建网页布局的基石。

## 元素类型

HTML 元素根据其默认的显示行为分为三类，可以通过 `display` 属性进行修改。

- **`block` (块级元素)**：独占一行，宽度默认撑满父容器，**可以**设置宽高（如 `div`, `p`, `h1`）。
- **`inline` (行内元素)**：不独占一行，宽度由内容撑开，**不可**设置宽高，上下外边距无效（如 `span`, `a`）。
- **`inline-block` (行内块元素)**：不独占一行，但**可以**设置宽高（如 `img`, `input`）。
- **`none`**：隐藏元素，且不占位（从文档流中完全移除）。

<div style="border: 1px solid #ddd; border-radius: 4px; overflow: hidden; margin: 20px 0;">
<div style="background-color: #f5f5f5; padding: 10px; border-bottom: 1px solid #ddd; font-family: Consolas, monospace; font-size: 14px; color: #333;">
&lt;!-- CSS 源码 --&gt;<br>
.box { background: #e3f2fd; border: 1px solid #2196f3; padding: 5px; }<br>
<br>
&lt;!-- HTML 源码 --&gt;<br>
&lt;span class="box" style="display: block;"&gt;Block: 独占一行&lt;/span&gt;<br>
&lt;span class="box" style="display: inline;"&gt;Inline: 随内容&lt;/span&gt;<br>
&lt;span class="box" style="display: inline;"&gt;Inline: 排列&lt;/span&gt;<br>
&lt;span class="box" style="display: inline-block; width: 120px;"&gt;Inline-Block: 可设宽&lt;/span&gt;
</div>
<div style="padding: 20px; background-color: #fff;">
<span style="display: block; background: #e3f2fd; border: 1px solid #2196f3; padding: 5px; margin-bottom: 5px;">Block: 独占一行</span>
<span style="display: inline; background: #e3f2fd; border: 1px solid #2196f3; padding: 5px;">Inline: 随内容</span>
<span style="display: inline; background: #e3f2fd; border: 1px solid #2196f3; padding: 5px;">Inline: 排列</span>
<span style="display: inline-block; width: 120px; background: #e3f2fd; border: 1px solid #2196f3; padding: 5px; margin-left: 5px;">Inline-Block: 可设宽</span>
</div>
</div>

## 盒子模型

所有 HTML 元素均可视为一个矩形盒子，由内向外依次为：**Content** -> **Padding** -> **Border** -> **Margin**。

<div style="border: 1px solid #ddd; border-radius: 4px; overflow: hidden; margin: 20px 0;">
<div style="padding: 20px; background-color: #fff; display: flex; justify-content: center;">
<div style="background-color: #ffccbc; padding: 20px; border: 1px dashed #bf360c; display: inline-block; position: relative;">
<span style="position: absolute; top: 0; left: 0; font-size: 10px; padding: 2px;">Margin (外边距)</span>
<div style="background-color: #ffe082; padding: 5px; border: 1px solid #ff6f00;">
<span style="font-size: 10px; display: block;">Border (边框)</span>
<div style="background-color: #c8e6c9; padding: 20px; border: 1px dashed #388e3c;">
<span style="font-size: 10px; display: block;">Padding (内边距)</span>
<div style="background-color: #fff; padding: 10px; text-align: center; border: 1px solid #ccc;">
Content (内容)
</div>
</div>
</div>
</div>
</div>
</div>

## 盒模型计算模式

通过 `box-sizing` 属性控制宽高的计算方式。

- **`content-box` (默认)**：宽度仅包含 Content。
    - 实际占用宽度 = width + padding + border。
    - **缺点**：增加内边距会撑大盒子，破坏布局。
- **`border-box` (推荐)**：宽度包含 Content + Padding + Border。
    - 实际占用宽度 = width。
    - **优点**：增加内边距会向内压缩内容，盒子总宽不变，易于布局。

<div style="border: 1px solid #ddd; border-radius: 4px; overflow: hidden; margin: 20px 0;">
<div style="background-color: #f5f5f5; padding: 10px; border-bottom: 1px solid #ddd; font-family: Consolas, monospace; font-size: 14px; color: #333;">
&lt;!-- CSS 源码：两者设定完全相同 --&gt;<br>
.box { width: 100%; padding: 20px; border: 10px solid blue; }<br>
<br>
&lt;!-- HTML 源码 --&gt;<br>
&lt;!-- content-box: 总宽变大，溢出父容器 --&gt;<br>
&lt;div class="box" style="box-sizing: content-box;"&gt;默认&lt;/div&gt;<br>
<br>
&lt;!-- border-box: 总宽保持 100% --&gt;<br>
&lt;div class="box" style="box-sizing: border-box;"&gt;推荐&lt;/div&gt;
</div>
<div style="padding: 20px; background-color: #fff; width: 220px; border: 1px solid #333;">
<div style="font-size: 12px; margin-bottom: 5px;">父容器 (宽度 220px)</div>
<div style="width: 100%; padding: 10px; border: 5px solid #2196f3; box-sizing: content-box; background: #e3f2fd; margin-bottom: 20px;">
content-box<br><span style="font-size:10px">(溢出了)</span>
</div>
<div style="width: 100%; padding: 10px; border: 5px solid #4caf50; box-sizing: border-box; background: #e8f5e9;">
border-box<br><span style="font-size:10px">(刚好适应)</span>
</div>
</div>
</div>

## 定位

通过 `position` 属性改变元素的定位方式。

- **`static`**：默认值，遵循标准文档流，`top`/`left` 无效。
- **`relative`**：**相对定位**。相对于自身原始位置偏移。
    - **特点**：视觉上移动了，但**原占位依然保留**，不会影响周围元素。
- **`absolute`**：**绝对定位**。相对于最近的已定位（非 static）祖先元素偏移。
    - **特点**：脱离文档流，不占位，通常配合 `父相子绝`（父 relative，子 absolute）使用。
- **`fixed`**：**固定定位**。相对于浏览器视口定位。
    - **特点**：页面滚动时元素位置固定不动（如顶部导航栏、回到顶部按钮）。

<div style="border: 1px solid #ddd; border-radius: 4px; overflow: hidden; margin: 20px 0;">
<div style="background-color: #f5f5f5; padding: 10px; border-bottom: 1px solid #ddd; font-family: Consolas, monospace; font-size: 14px; color: #333;">
&lt;!-- CSS 源码 --&gt;<br>
.parent { position: relative; height: 100px; }<br>
.box-1 { position: relative; top: 20px; left: 20px; }<br>
.box-2 { position: absolute; top: 0; right: 0; }<br>
<br>
&lt;!-- HTML 源码 --&gt;<br>
&lt;div class="parent"&gt;<br>
&nbsp;&nbsp;&lt;div class="box-1"&gt;相对定位&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div class="box-2"&gt;绝对定位&lt;/div&gt;<br>
&lt;/div&gt;
</div>
<div style="padding: 20px; background-color: #fff;">
<div style="background: #eee; height: 120px; position: relative; border: 1px solid #ccc;">
<span style="position: absolute; top: 2px; left: 2px; font-size: 10px; color: #999;">父容器 (relative)</span>
<div style="width: 80px; height: 40px; background: #2196f3; color: white; line-height: 40px; text-align: center; font-size: 12px; position: relative; top: 30px; left: 30px; box-shadow: 2px 2px 5px rgba(0,0,0,0.2);">
相对定位
</div>
<div style="width: 80px; height: 40px; border: 1px dashed #2196f3; position: absolute; top: 0; left: 0; box-sizing: border-box; display: flex; align-items: center; justify-content: center;">
<span style="font-size: 10px; color: #2196f3;">原位保留</span>
</div>
<div style="width: 80px; height: 40px; background: #f44336; color: white; line-height: 40px; text-align: center; font-size: 12px; position: absolute; top: 10px; right: 10px; box-shadow: 2px 2px 5px rgba(0,0,0,0.2);">
绝对定位
</div>
</div>
</div>
</div>

## 层级

`z-index` 属性用于控制定位元素的堆叠顺序（哪个在上面）。

- **规范**：仅对设置了 `position`（非 static）的元素有效。
- **数值**：数值越大，层级越高。

<div style="border: 1px solid #ddd; border-radius: 4px; overflow: hidden; margin: 20px 0;">
<div style="padding: 20px; background-color: #fff; position: relative; height: 100px;">
<div style="position: absolute; top: 20px; left: 20px; width: 80px; height: 80px; background: #2196f3; z-index: 1; border: 1px solid #fff; box-shadow: 0 0 5px rgba(0,0,0,0.3);">
z-index: 1
</div>
<div style="position: absolute; top: 40px; left: 40px; width: 80px; height: 80px; background: #ff9800; z-index: 2; border: 1px solid #fff; box-shadow: 0 0 5px rgba(0,0,0,0.3);">
z-index: 2
</div>
</div>
</div>